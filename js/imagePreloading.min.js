// Reference: https://stackoverflow.com/questions/10240110/how-do-you-cache-an-image-in-javascript
function preloadImages(array,waitForOtherResources,timeout){var loaded=false,list=preloadImages.list||[],imgs=array.slice(0),t=timeout||15*1000,timer;if(!preloadImages.list){preloadImages.list=[]}if(!waitForOtherResources||document.readyState==="complete"){loadNow()}else{window.addEventListener("load",function(){clearTimeout(timer);loadNow()});timer=setTimeout(loadNow,t)}function loadNow(){if(!loaded){loaded=true;for(var i=0;i<imgs.length;i+=1){var img=new Image();img.onload=img.onerror=img.onabort=function(){var index=list.indexOf(this);if(index!==-1){list.splice(index,1)}};list.push(img);img.src=imgs[i]}}}}function preloadGalleryImages(){const gridImages=document.querySelectorAll(".image-grid img, .image-grid-span img");const priorityImages=[];const secondaryImages=[];const lazyImages=[];gridImages.forEach((img,index)=>{const fullSrc=img.getAttribute("data-src");if(fullSrc){if(index<6){priorityImages.push(fullSrc)}else if(index<12){secondaryImages.push(fullSrc)}else{lazyImages.push(fullSrc)}}});if(priorityImages.length>0){preloadImages(priorityImages,false)}if(secondaryImages.length>0){setTimeout(()=>{preloadImages(secondaryImages,false)},2000)}if(lazyImages.length>0){setTimeout(()=>{preloadImages(lazyImages,true)},5000)}}function preloadSliderImages(){const sliderImages=document.querySelectorAll(".slider .slide");const sliderSrcs=Array.from(sliderImages).map((img)=>img.src);if(sliderSrcs.length>0){preloadImages(sliderSrcs,true)}}setTimeout(preloadGalleryImages,500);setTimeout(preloadSliderImages,2000);document.addEventListener("DOMContentLoaded",()=>{preloadGalleryImages();const lazyImageOptions={root:null,rootMargin:"200px",threshold:0.1};const lazyImageObserver=new IntersectionObserver((entries)=>{entries.forEach((entry)=>{if(entry.isIntersecting){const img=entry.target;const fullSrc=img.getAttribute("data-src");if(fullSrc){preloadImages([fullSrc],false)}lazyImageObserver.unobserve(img)}})},lazyImageOptions);const gridImages=document.querySelectorAll(".image-grid img, .image-grid-span img");gridImages.forEach((img)=>{if(img.getAttribute("loading")==="lazy"){lazyImageObserver.observe(img)}})});